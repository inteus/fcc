(this.webpackJsonpfcc_task=this.webpackJsonpfcc_task||[]).push([[0],{27:function(e,t,a){e.exports={appWrapper:"App_appWrapper__3NVUO"}},29:function(e,t,a){e.exports=a(57)},3:function(e,t,a){e.exports={order__container:"OrderList_order__container__3FuZV",order__list:"OrderList_order__list__1Vz1Z",order__list__item:"OrderList_order__list__item__21tqG",order__list__btn:"OrderList_order__list__btn__35oa1",order__detail:"OrderList_order__detail__80GTi",order__made__total:"OrderList_order__made__total__16_0d",order__made__total__header:"OrderList_order__made__total__header__Ge91S"}},4:function(e,t,a){e.exports={itemsListWrapper:"ItemList_itemsListWrapper__31Uxl",itemsTitleWrapper:"ItemList_itemsTitleWrapper__2cx9c",item__title:"ItemList_item__title__CkLXp",itemsWrapper:"ItemList_itemsWrapper__1Q7Bi",item:"ItemList_item__lspKI",item__item:"ItemList_item__item__1XXCw"}},57:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(7),c=a.n(i),o=a(8),l=a(1),m=a(9),s=a(10),d=a(12),_=a(13),u=a(6),p=a(11),E=a.n(p),O=function(e){return{type:"GET_ITEMS",items:e}},v=function(e){return{type:"FETCH_DATA",isFetching:e}},h=function(){return function(e){e(v(!0)),E.a.get("https://5e2df3533b0d640014be10a0.mockapi.io/api/v1/items").then((function(t){e(O(t.data)),e(v(!1))})).catch((function(t){e(function(e){return{type:"CATCH_ERROR",error:e}}(t)),e(v(!1))}))}},f=function(e,t,a){return{type:"ADD_TO_ORDER",itemName:e,itemId:t,itemPrice:a}},b=function(e){return{type:"SEND_ORDER_TOGGLE",isSending:e}};var g=function(){return function(e){e({type:"REMOVE_CART_ITEMS"}),e(h())}},y=a(3),T=a.n(y),N=function(e){return n.a.createElement("div",{className:T.a.order__list__item},n.a.createElement("div",null,e.name),n.a.createElement("div",null,e.count," pcs."))},I=function(){return n.a.createElement("div",{style:{color:"red",margin:"25px",fontSize:"25px"}},"Failed to load or send data.")},j=function(){return n.a.createElement("div",{className:"mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active",style:{margin:"50px"}})},R=function(e){Object(_.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(m.a)(this,a),(r=t.call(this,e)).changeInputHandler=function(e){e.persist(),r.setState((function(t){return Object(l.a)({},t,{},Object(o.a)({},e.target.name,e.target.value))}))},r.sendOrder=function(e){e.preventDefault(),r.props.createOrder(r.state.customer_name,r.state.customer_phone,r.props.myOrder,r.props.totalAmount),r.setState({customer_name:"",customer_phone:""})},r.state={customer_name:"",customer_phone:""},r}return Object(s.a)(a,[{key:"render",value:function(){var e=Object.keys(localStorage).map((function(e){var t=JSON.parse(localStorage.getItem(e));return n.a.createElement("div",{className:e},n.a.createElement("p",null,n.a.createElement("u",null,n.a.createElement("i",null,"Order \u2116",t.id))),n.a.createElement("p",null,t.items.map((function(e){return n.a.createElement("div",null,e.name,": ",e.count," pcs.")}))),n.a.createElement("p",null,n.a.createElement("i",null,"Total :")," ",n.a.createElement("b",null,t.total," $")),n.a.createElement("hr",null))})),t=this.props,a=t.myOrder,r=t.totalAmount,i=t.error,c=t.sendToggle,o=a.map((function(e){return n.a.createElement(N,Object.assign({},e,{key:e.id}))}));return i?n.a.createElement(I,null):c?n.a.createElement(j,null):n.a.createElement("div",null,n.a.createElement("form",{onSubmit:this.sendOrder},n.a.createElement("div",{className:T.a.order__container},n.a.createElement("div",{className:T.a.order__list},n.a.createElement("div",null,o.length?o:"Your order list is empty!"),n.a.createElement("hr",null),n.a.createElement("div",{className:T.a.order__list__total},n.a.createElement("i",null,"Total :")," ",n.a.createElement("b",null,r," $")),n.a.createElement("div",null)),n.a.createElement("div",null,n.a.createElement("div",{className:T.a.order__detail},"Name: ",n.a.createElement("input",{className:"form-control",type:"text",id:"customer_name",value:this.state.customer_name,name:"customer_name",onChange:this.changeInputHandler})),n.a.createElement("div",{className:T.a.order__detail},"Phone: ",n.a.createElement("input",{className:"form-control",type:"text",id:"customer_phone",value:this.state.customer_phone,name:"customer_phone",onChange:this.changeInputHandler})),n.a.createElement("div",{className:T.a.order__detail},n.a.createElement("button",{className:"btn btn-success",disabled:o.length?"":"disabled",type:"submit"},"Create order"))))),n.a.createElement("div",{className:T.a.order__list__btn},n.a.createElement("button",{className:"btn btn-primary",onClick:this.props.clearCart,disabled:a.length?"":"disabled"},"Clear cart")),n.a.createElement("div",{className:T.a.order__made__total},n.a.createElement("div",{className:T.a.order__made__total__header},n.a.createElement("b",null,"List of orders you made:")),n.a.createElement("div",{className:T.a.order__made__total__header},0===Object.keys(e).length?"No orders yet!":e)))}}]),a}(r.Component),A=Object(u.b)((function(e){var t=e.order;return{myOrder:t.myOrder,totalAmount:t.totalAmount,error:t.error,sendToggle:t.sendToggle}}),{addToOrder:f,createOrder:function(e,t,a,r){return function(n){n(b(!0)),E.a.post("https://5e2df3533b0d640014be10a0.mockapi.io/api/v1/order",{customer_name:e,customer_phone:t,customer_order:a,total_amount:r}).then((function(e){console.log(e);var t={id:e.data.id,items:e.data.customer_order,total:e.data.total_amount},a=Date.now().toString();localStorage.setItem(a,JSON.stringify(t)),n(b(!1)),n(g()),alert("\u0417\u0430\u043a\u0430\u0437 \u2116".concat(e.data.id," \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d. \u0412\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f: ").concat(Date().toString(),"!")),n(h())})).catch((function(e){n(function(e){return{type:"CATCH_CART_ERROR",error:e}}(e))}))}},showAlert:function(e){return function(t){t({type:"SHOW_ALERT",payload:e}),setTimeout((function(){t({type:"HIDE_ALERT"})}),3e3)}},clearCart:g})(R),C=a(4),L=a.n(C),S=function(e){var t=e.name,a=e.price,r=e.quantity,i=e.id;return n.a.createElement("div",{className:L.a.item},n.a.createElement("div",{className:L.a.item__item},t),n.a.createElement("div",{className:L.a.item__item},a," $"),n.a.createElement("div",{className:L.a.item__item},r," pcs."),n.a.createElement("div",{className:L.a.item__item},n.a.createElement("button",{className:"btn btn-secondary",onClick:function(){e.removeItem(i),e.addToOrder(t,i,a)},disabled:e.quantity>0?"":"disabled"},"Add")))},k=function(e){Object(_.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.props.setItems(this.items)}},{key:"render",value:function(){var e=this.props,t=e.items,a=e.isFetching,r=e.error,i=e.removeItem,c=e.addToOrder,o=t.map((function(e){return n.a.createElement(S,Object.assign({},e,{key:e.id,removeItem:i,addToOrder:c}))}));return a?n.a.createElement(j,null):r?n.a.createElement(I,null):n.a.createElement("div",{className:L.a.itemsListWrapper},n.a.createElement("div",{className:L.a.itemsTitleWrapper},n.a.createElement("div",{className:L.a.item__title},"Title"),n.a.createElement("div",{className:L.a.item__title},"Cost"),n.a.createElement("div",{className:L.a.item__title},"Qty"),n.a.createElement("div",{className:L.a.item__title},"Add to cart")),n.a.createElement("div",null,o))}}]),a}(r.Component),D=Object(u.b)((function(e){var t=e.items;return{items:t.items,isFetching:t.isFetching,error:t.error}}),{getItems:O,removeItem:function(e){return{type:"REMOVE_ITEM",itemId:e}},fetchData:v,addToOrder:f,setItems:h})(k),W=a(27),w=a.n(W),M=function(){return n.a.createElement("div",{className:w.a.appWrapper},n.a.createElement("div",null,n.a.createElement(D,null)),n.a.createElement("div",null,n.a.createElement(A,null)))},x=a(5),F=a(28),H={items:[],isFetching:!0,error:null},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ITEMS":return Object(l.a)({},e,{items:t.items});case"FETCH_DATA":return Object(l.a)({},e,{isFetching:t.isFetching});case"REMOVE_ITEM":return Object(l.a)({},e,{items:e.items.map((function(e){return e.id===t.itemId?Object(l.a)({},e,{quantity:e.quantity-1}):e}))});case"RETURN_ITEM":return Object(l.a)({},e,{items:e.items.map((function(e){return e.id===t.itemId?Object(l.a)({},e,{quantity:e.quantity+1}):e}))});case"CATCH_ERROR":return Object(l.a)({},e,{error:t.error});default:return e}},q={myOrder:[],totalAmount:0,sendToggle:!1,error:null},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_ORDER":var a=e.myOrder,r=!1;return a.forEach((function(e){e.id===t.itemId&&(e.count+=1,r=!0)})),r||a.push({name:t.itemName,id:t.itemId,price:t.itemPrice,count:1}),Object(l.a)({},e,{myOrder:a,totalAmount:e.totalAmount+t.itemPrice});case"REMOVE_CART_ITEMS":return Object(l.a)({},e,{myOrder:[],totalAmount:0});case"SEND_ORDER_TOGGLE":return Object(l.a)({},e,{sendToggle:t.isSending});case"CATCH_CART_ERROR":return Object(l.a)({},e,{error:t.error});default:return e}},J=Object(x.c)({items:G,order:V});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var P=Object(x.e)(J,Object(x.d)(Object(x.a)(F.a)));c.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(u.a,{store:P},n.a.createElement(M,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[29,1,2]]]);
//# sourceMappingURL=main.207d92e0.chunk.js.map