(this.webpackJsonpfcc_task=this.webpackJsonpfcc_task||[]).push([[0],{2:function(e,t,r){e.exports={order__container:"OrderList_order__container__3FuZV",order__list:"OrderList_order__list__1Vz1Z",order__list__item:"OrderList_order__list__item__21tqG",order__list__btn:"OrderList_order__list__btn__35oa1",order__detail:"OrderList_order__detail__80GTi",order__made__total:"OrderList_order__made__total__16_0d",order__made__total__header:"OrderList_order__made__total__header__Ge91S",alert__success:"OrderList_alert__success__XJIR9"}},27:function(e,t,r){e.exports={appWrapper:"App_appWrapper__3NVUO"}},29:function(e,t,r){e.exports=r(57)},4:function(e,t,r){e.exports={itemsListWrapper:"ItemList_itemsListWrapper__31Uxl",itemsTitleWrapper:"ItemList_itemsTitleWrapper__2cx9c",item__title:"ItemList_item__title__CkLXp",itemsWrapper:"ItemList_itemsWrapper__1Q7Bi",item:"ItemList_item__lspKI",item__item:"ItemList_item__item__1XXCw"}},57:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),i=r(7),c=r.n(i),l=r(8),o=r(1),s=r(9),m=r(10),d=r(12),u=r(13),_=r(6),p=r(11),E=r.n(p),f=function(e){return{type:"GET_ITEMS",items:e}},O=function(e){return{type:"FETCH_DATA",isFetching:e}},h=function(){return function(e){e(O(!0)),E.a.get("https://5e2df3533b0d640014be10a0.mockapi.io/api/v1/items").then((function(t){e(f(t.data)),e(O(!1))})).catch((function(t){e(function(e){return{type:"CATCH_ERROR",error:e}}(t)),e(O(!1))}))}},v=function(e,t,r){return{type:"ADD_TO_ORDER",itemName:e,itemId:t,itemPrice:r}},b=function(e){return{type:"SEND_ORDER_TOGGLE",isSending:e}},g=function(e){return function(t){t({type:"SHOW_ALERT",payload:e}),setTimeout((function(){t(y())}),4e3)}},y=function(){return{type:"HIDE_ALERT"}},T=function(e){return{type:"SUCCESS_ALERT",text:e}},I=function(){return function(e){e({type:"REMOVE_CART_ITEMS"}),e(h())}},N=r(2),A=r.n(N),R=function(e){return n.a.createElement("div",{className:A.a.order__list__item},n.a.createElement("div",null,e.name),n.a.createElement("div",null,e.count," pcs."))},C=function(){return n.a.createElement("div",{class:"alert alert-danger",role:"alert"},"Failed to load or send data.")},S=function(e){var t=e.text;return n.a.createElement("div",{className:"alert alert-warning",role:"alert"},t)},j=function(){return n.a.createElement("div",{class:"d-flex justify-content-center",style:{margin:"50px"}},n.a.createElement("div",{class:"spinner-border",role:"status"},n.a.createElement("span",{class:"sr-only"},"Loading...")))},L=function(e){return n.a.createElement("div",{className:A.a.alert__success},n.a.createElement("div",{className:"alert alert-success",role:"alert"},e.text,"  ",n.a.createElement("button",{type:"button",class:"btn btn-danger btn-sm",onClick:e.hideSuccessAlert,title:"Click to hide"},"hide")))},D=function(e){Object(u.a)(r,e);var t=Object(d.a)(r);function r(e){var a;return Object(s.a)(this,r),(a=t.call(this,e)).changeInputHandler=function(e){e.persist(),a.setState((function(t){return Object(o.a)({},t,{},Object(l.a)({},e.target.name,e.target.value))}))},a.sendOrder=function(e){e.preventDefault(),a.props.createOrder(a.state.customer_name,a.state.customer_phone,a.props.myOrder,a.props.totalAmount),a.setState({customer_name:"",customer_phone:""})},a.state={customer_name:"",customer_phone:""},a}return Object(m.a)(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.myOrder,a=t.totalAmount,i=t.error,c=t.sendToggle,l=Object.keys(localStorage).map((function(e){var t=JSON.parse(localStorage.getItem(e));return n.a.createElement("div",{className:e},n.a.createElement("p",null,n.a.createElement("u",null,n.a.createElement("i",null,"Order \u2116",t.id))),n.a.createElement("p",null,t.items.map((function(e){return n.a.createElement("div",null,e.name,": ",e.count," pcs.")}))),n.a.createElement("p",null,n.a.createElement("i",null,"Total :")," ",n.a.createElement("b",null,t.total," $")),n.a.createElement("hr",null))})),o=r.map((function(t){return n.a.createElement(R,Object.assign({},t,{key:t.id,removeFromOrder:e.props.removeFromOrder}))}));return i?n.a.createElement(C,null):c?n.a.createElement(j,null):n.a.createElement("div",null,n.a.createElement("form",{onSubmit:this.sendOrder},this.props.alert&&n.a.createElement(S,{text:this.props.alert}),this.props.orderInfo&&n.a.createElement(L,{text:this.props.orderInfo,hideSuccessAlert:this.props.hideSuccessAlert}),n.a.createElement("div",{className:A.a.order__container},n.a.createElement("div",{className:A.a.order__list},n.a.createElement("div",null,o.length?o:"Your order list is empty!"),n.a.createElement("div",{className:A.a.order__list__total},n.a.createElement("i",null,"Total :")," ",n.a.createElement("b",null,a," $"))),n.a.createElement("div",null,n.a.createElement("div",{className:A.a.order__detail},"Name: ",n.a.createElement("input",{className:"form-control",type:"text",id:"customer_name",value:this.state.customer_name,name:"customer_name",onChange:this.changeInputHandler})),n.a.createElement("div",{className:A.a.order__detail},"Phone: ",n.a.createElement("input",{className:"form-control",type:"text",id:"customer_phone",value:this.state.customer_phone,name:"customer_phone",onChange:this.changeInputHandler})),n.a.createElement("div",{className:A.a.order__detail},n.a.createElement("button",{className:"btn btn-success",disabled:o.length?"":"disabled",type:"submit"},"Create order"))))),n.a.createElement("div",{className:A.a.order__list__btn},n.a.createElement("button",{className:"btn btn-primary",onClick:this.props.clearCart,disabled:r.length?"":"disabled"},"Clear cart")),n.a.createElement("div",{className:A.a.order__made__total},n.a.createElement("div",{className:A.a.order__made__total__header},n.a.createElement("b",null,"List of orders you made:")),n.a.createElement("div",{className:A.a.order__made__total__header},0===Object.keys(l).length?"No orders yet!":l)))}}]),r}(a.Component),k=Object(_.b)((function(e){var t=e.order,r=t.myOrder,a=t.totalAmount,n=t.error,i=t.alert,c=t.orderInfo;return{myOrder:r,totalAmount:a,error:n,sendToggle:t.sendToggle,alert:i,orderInfo:c}}),{addToOrder:v,createOrder:function(e,t,r,a){return function(n){if(!e.trim()||!t.trim())return n(g("You must fill out all contact fields!"));n(b(!0)),E.a.post("https://5e2df3533b0d640014be10a0.mockapi.io/api/v1/order",{customer_name:e,customer_phone:t,customer_order:r,total_amount:a}).then((function(e){console.log(e);var t={id:e.data.id,items:e.data.customer_order,total:e.data.total_amount},r=Date.now().toString();localStorage.setItem(r,JSON.stringify(t)),n(b(!1)),n(I()),n(T("Order \u2116".concat(e.data.id," sent! Create time: ").concat(Date().toString().slice(0,24)))),n(h())})).catch((function(e){n(function(e){return{type:"CATCH_CART_ERROR",error:e}}(e))}))}},showAlert:g,successAlert:T,hideSuccessAlert:function(){return{type:"HIDE_SUCCESS_ALERT"}},clearCart:I})(D),x=r(4),H=r.n(x),W=function(e){var t=e.name,r=e.price,a=e.quantity,i=e.id;return n.a.createElement("div",{className:H.a.item},n.a.createElement("div",{className:H.a.item__item},t),n.a.createElement("div",{className:H.a.item__item},r," $"),n.a.createElement("div",{className:H.a.item__item},a," pcs."),n.a.createElement("div",{className:H.a.item__item},n.a.createElement("button",{className:"btn btn-secondary",onClick:function(){e.removeItem(i),e.addToOrder(t,i,r)},disabled:e.quantity>0?"":"disabled"},"Add")))},w=function(e){Object(u.a)(r,e);var t=Object(d.a)(r);function r(){return Object(s.a)(this,r),t.apply(this,arguments)}return Object(m.a)(r,[{key:"componentDidMount",value:function(){this.props.setItems(this.items)}},{key:"render",value:function(){var e=this.props,t=e.items,r=e.isFetching,a=e.error,i=e.removeItem,c=e.addToOrder,l=t.map((function(e){return n.a.createElement(W,Object.assign({},e,{key:e.id,removeItem:i,addToOrder:c}))}));return r?n.a.createElement(j,null):a?n.a.createElement(C,null):n.a.createElement("div",{className:H.a.itemsListWrapper},n.a.createElement("div",{className:H.a.itemsTitleWrapper},n.a.createElement("div",{className:H.a.item__title},"Title"),n.a.createElement("div",{className:H.a.item__title},"Cost"),n.a.createElement("div",{className:H.a.item__title},"Qty"),n.a.createElement("div",{className:H.a.item__title},"Add to cart")),n.a.createElement("div",null,l))}}]),r}(a.Component),F=Object(_.b)((function(e){var t=e.items;return{items:t.items,isFetching:t.isFetching,error:t.error}}),{getItems:f,removeItem:function(e){return{type:"REMOVE_ITEM",itemId:e}},fetchData:O,addToOrder:v,setItems:h})(w),M=r(27),G=r.n(M),q=function(){return n.a.createElement("div",{className:G.a.appWrapper},n.a.createElement("div",null,n.a.createElement(F,null)),n.a.createElement("div",null,n.a.createElement(k,null)))},U=r(5),V=r(28),J={items:[],isFetching:!0,error:null},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ITEMS":return Object(o.a)({},e,{items:t.items});case"FETCH_DATA":return Object(o.a)({},e,{isFetching:t.isFetching});case"REMOVE_ITEM":return Object(o.a)({},e,{items:e.items.map((function(e){return e.id===t.itemId?Object(o.a)({},e,{quantity:e.quantity-1}):e}))});case"RETURN_ITEM":return Object(o.a)({},e,{items:e.items.map((function(e){return e.id===t.itemId?Object(o.a)({},e,{quantity:e.quantity+1}):e}))});case"CATCH_ERROR":return Object(o.a)({},e,{error:t.error});default:return e}},X={myOrder:[],totalAmount:0,sendToggle:!1,error:null,alert:null,orderInfo:null},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_ORDER":var r=e.myOrder,a=!1;return r.forEach((function(e){e.id===t.itemId&&(e.count+=1,a=!0)})),a||r.push({name:t.itemName,id:t.itemId,price:t.itemPrice,count:1}),Object(o.a)({},e,{myOrder:r,totalAmount:e.totalAmount+t.itemPrice});case"REMOVE_CART_ITEMS":return Object(o.a)({},e,{myOrder:[],totalAmount:0});case"SEND_ORDER_TOGGLE":return Object(o.a)({},e,{sendToggle:t.isSending});case"CATCH_CART_ERROR":return Object(o.a)({},e,{error:t.error});case"SHOW_ALERT":return Object(o.a)({},e,{alert:t.payload});case"HIDE_ALERT":return Object(o.a)({},e,{alert:null});case"SUCCESS_ALERT":return Object(o.a)({},e,{orderInfo:t.text});case"HIDE_SUCCESS_ALERT":return Object(o.a)({},e,{orderInfo:null});default:return e}},B=Object(U.c)({items:P,order:$});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Q=Object(U.e)(B,Object(U.d)(Object(U.a)(V.a)));c.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(_.a,{store:Q},n.a.createElement(q,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[29,1,2]]]);
//# sourceMappingURL=main.5091a52e.chunk.js.map